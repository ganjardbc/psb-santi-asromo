var myBase = "http://localhost/psbonlinereal/"
angular.module("common.ctrl",[]).factory("config",["$state","$http","$base64","$rootScope",function(n,t,o,r){var e=myBase;return{getToken:function(){return localStorage.getItem("token")||""},baseApi:function(){return myBase + "api_v1/"},baseUrl:function(){return e},baseApiUser:function(){return myBase},baseImage:function(){return myBase+"img/"},baseAdmin:function(){return myBase + "admin-psb/"}}}]);
!function(){var t=angular.module("app",["ui.router","base64","swangular","ngSanitize","ui.select","moment-picker","ngCacheBuster","moment-picker","login.ctrl","auth.ctrl","common.ctrl","verifikasi.ctrl","datapendaftaran.ctrl","datapendaftaranform.ctrl","seleksi.ctrl","session.ctrl","agenda.ctrl","config.ctrl","biaya.ctrl","hasil.ctrl"]);t.config(["httpRequestInterceptorCacheBusterProvider",function(t){t.setMatchlist([/.*views.*/,/.*js.*/,/.*libs.*/],!0)}]),t.run(["config","$http",function(t,a){a.defaults.headers.common["X-Api-Key"]="Bearer "+t.getToken()}]),t.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,a,e){a.otherwise("/auth"),t.state("dash",{url:"/dash",templateUrl:"views/dash.html",abstract:!0,controller:"appCtrl"}).state("dash.verifikasi",{url:"/verifikasi",templateUrl:"views/verifikasi.html",controller:"verifikasiCtrl"}).state("dash.datapendaftaran",{url:"/datapendaftaran",templateUrl:"views/datapendaftaran.html",controller:"datapendaftaranCtrl"}).state("dash.hasil",{url:"/hasil",templateUrl:"views/hasil.html",controller:"hasilCtrl"}).state("dash.datapendaftaranform",{url:"/datapendaftaranform?id&status",templateUrl:"views/datapendaftaran_form.html",controller:"datapendaftaranformCtrl"}).state("dash.seleksi",{url:"/seleksi",templateUrl:"views/seleksi.html",controller:"seleksiCtrl"}).state("dash.setting",{url:"/setting",templateUrl:"views/config.html",controller:"configCtrl"}).state("dash.agenda",{url:"/agenda",templateUrl:"views/agenda.html",controller:"agendaCtrl"}).state("dash.session",{url:"/session",templateUrl:"views/session.html",controller:"sessionCtrl"}).state("dash.biaya",{url:"/biaya",templateUrl:"views/biaya.html",controller:"biayaCtrl"}).state("auth",{url:"/auth",templateUrl:"views/auth.html",controller:"authCtrl"}).state("login",{url:"/",templateUrl:"views/login.html",controller:"loginCtrl"}),window.history&&window.history.pushState&&e.html5Mode(!0).hashPrefix("!")}]),t.controller("appCtrl",["config","$scope","$rootScope","$location","$window","$timeout","$http","$state",function(t,a,e,r,n,l,o,i){e.loading=!1,a.isActive=function(t){return t===r.path()},e.rootBaseAdmin=t.baseAdmin()+"img/",e.root_logout=function(){n.localStorage.removeItem("token"),n.location.href=t.baseAdmin()+"auth"},"http:"!=location.protocol&&(location.href="http:"+window.location.href.substring(window.location.protocol.length)),a.menus=[]}]),t.directive("blur",function(){return function(t,a,e){e.$observe("blur",function(t){""!=t&&a[0].blur()})}}),t.filter("highlight",function(){return function(t,a){return a&&(t=t.replace(new RegExp("("+a+")","gi"),'<span class="highlighted">$1</span>')),t}}),t.directive("ngEnter",function(){return function(t,a,e){a.bind("keydown keypress",function(a){13===a.which&&(t.$apply(function(){t.$eval(e.ngEnter)}),a.preventDefault())})}}),t.directive("fileModel",["$parse",function(t){return{restrict:"A",link:function(a,e,r){var n=t(r.fileModel).assign;e.bind("change",function(){a.$apply(function(){n(a,e[0].files[0])})})}}}]),t.filter("propsFilter",function(){return function(t,a){var e=[];if(angular.isArray(t)){var r=Object.keys(a);t.forEach(function(t){for(var n=!1,l=0;l<r.length;l++){var o=r[l],i=a[o].toLowerCase();if(-1!==t[o].toString().toLowerCase().indexOf(i)){n=!0;break}}n&&e.push(t)})}else e=t;return e}})}();
angular.module("login.ctrl",[]).controller("loginCtrl",["config","$scope","$http","$base64","$state","$rootScope","swangular","$window",function(o,a,t,n,l,i,e,r){"http:"!=location.protocol&&(location.href="http:"+window.location.href.substring(window.location.protocol.length)),a.data={},async function(){i.loading=!0;try{const n=await t({method:"GET",url:o.baseApi()+"auth"});i.loading=!1,a.$apply(),"ok"===n.data.status&&l.go("dash.verifikasi")}catch(o){i.loading=!1,a.$apply()}}(),a.login=function(){i.loading=!0,t({method:"POST",url:o.baseApiUser()+"user_login",data:{username:a.data.username,password:a.data.password}}).then(function(a){"error"!=a.data.token?(localStorage.setItem("token",a.data.token),i.loading=!1,location.href=o.baseAdmin()+"auth"):(i.loading=!1,e.alert("gagal login"))},function(o){i.loading=!1,e.alert("error login")})}}]);
angular.module("auth.ctrl",[]).controller("authCtrl",["config","$scope","$state","$base64","$http","$rootScope",function(o,t,a,n,i,l){"http:"!=location.protocol&&(location.href="http:"+window.location.href.substring(window.location.protocol.length)),async function(){l.loading=!0;try{"ok"===(await i({method:"GET",url:o.baseApi()+"auth"})).data.status?a.go("dash.verifikasi"):(l.loading=!1,a.go("login"))}catch(o){401===o.status&&"error"===o.data.status&&(l.loading=!1,t.$apply(),a.go("login"))}}()}]);
angular.module("verifikasi.ctrl",[]).controller("verifikasiCtrl",["config","$scope","$state","$base64","$http","$rootScope","swangular",function(a,t,i,r,o,n,e){t.datas_verifikasi=[];var s=1;async function l(){n.loading=!0;try{const r=await o({method:"GET",url:a.baseApi()+"verifikasi/"+s}),l=await o({method:"GET",url:a.baseApi()+"cek_kuota"});t.kuota=l.data,t.datas_verifikasi=r.data,n.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(n.loading=!1,i.go("login")):(n.loading=!1,e.alert("Error load data..."),t.$apply())}}t.url_pas_foto=a.baseImage()+"upload/",t.search="",t.data={},t.data_kartu={},t.kuota={},t.toRp=function(a){for(var t=parseInt(a,10).toString().split("").reverse().join(""),i="",r=0;r<t.length;r++)i+=t[r],(r+1)%3==0&&r!==t.length-1&&(i+=".");return i.split("").reverse().join("")},t.load_more=async function(){n.loading=!0;try{s+=1;const l=await o({method:"GET",url:a.baseApi()+"verifikasi/"+s});for(var r=0;r<l.data.length;r++)t.datas_verifikasi.push(l.data[r]);n.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(n.loading=!1,i.go("login")):(n.loading=!1,e.alert("Error load data..."),t.$apply())}},t.klik=async function(r){n.loading=!0;try{const l=await o({method:"GET",url:a.baseApi()+"verifikasi_kartu_ujian/"+r.id});if(t.data=angular.copy(r),0!=l.data.length){var s=l.data[0];t.data_kartu.no_kartu=s.no_kartu,t.data_kartu.no_ruangan=s.no_ruangan,t.data_kartu.no_bangku=s.no_bangku}else t.data_kartu={};n.loading=!1,$("#modal_verifikasi").appendTo("body").modal("show"),t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(n.loading=!1,i.go("login")):(n.loading=!1,e.alert("Error load data..."),t.$apply())}},t.act_verifikasi=async function(r){try{if((await e.swal({title:"Confirm",text:"Yakin akan memverifikasi "+r.nama+" ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, verifikasi"})).value){var s=angular.copy(r);await o({method:"POST",url:a.baseApi()+"verifikasi_generate_kartu_ujian",data:{id_pendaftaran:s.id,jenis_kelamin:s.jenis_kelamin,jenjang:s.jenjang,id:s.id}});var l=t.datas_verifikasi.indexOf(r);t.datas_verifikasi[l].status="VERIFIED",t.kuota.pendaftar+=1,n.loading=!1,e.success("Success verifikasi"),t.$apply()}}catch(a){401===a.status&&"error"===a.data.status?(n.loading=!1,i.go("login")):(n.loading=!1,e.alert("Error verifikasi data..."),t.$apply())}},t.act_batal_verifikasi=async function(r){if((await e.swal({title:"Confirm",text:"Yakin akan membatalkan verifikasi "+r.nama+" ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, batalkan"})).value)try{var s=angular.copy(r);await o({method:"POST",url:a.baseApi()+"batal_verifikasi",data:{id_pendaftaran:s.id}});var l=t.datas_verifikasi.indexOf(r);t.datas_verifikasi[l].status="UNVERIFIED",t.kuota.pendaftar-=1,e.success("Success batal verifikasi"),n.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(n.loading=!1,i.go("login")):(n.loading=!1,e.alert("Error batal verifikasi data..."),t.$apply())}},t.act_search=async function(){if(""===t.search)s=1,l();else{n.loading=!0;try{const r=await o({method:"GET",url:a.baseApi()+"search_verifikasi?q="+t.search});t.datas_verifikasi=r.data,n.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(n.loading=!1,i.go("login")):(n.loading=!1,e.alert("Error load data..."),t.$apply())}}},t.refresh=function(){s=1,t.search="",t.data={},t.data_kartu={},l()},l()}]);
angular.module("datapendaftaran.ctrl",[]).controller("datapendaftaranCtrl",["config","$scope","$state","$base64","$http","$rootScope","swangular",function(a,t,n,r,o,e,d){t.datas_pendaftaran=[];var s=1;async function l(){e.loading=!0;try{const r=await o({method:"GET",url:a.baseApi()+"datapendaftaran/"+s});console.log(r),t.datas_pendaftaran=r.data,e.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(e.loading=!1,n.go("login")):(e.loading=!1,d.alert("Error load data..."),t.$apply())}}t.url_pas_foto=a.baseImage()+"upload/",t.search="",t.data={},t.toRp=function(a){for(var t=parseInt(a,10).toString().split("").reverse().join(""),n="",r=0;r<t.length;r++)n+=t[r],(r+1)%3==0&&r!==t.length-1&&(n+=".");return n.split("").reverse().join("")},t.load_more=async function(){e.loading=!0;try{s+=1;const l=await o({method:"GET",url:a.baseApi()+"datapendaftaran/"+s});for(var r=0;r<l.data.length;r++)t.datas_pendaftaran.push(l.data[r]);e.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(e.loading=!1,n.go("login")):(e.loading=!1,d.alert("Error load data..."),t.$apply())}},t.export_to_excel=function(){window.open(a.baseUrl()+"h312ud1/export.php","_blank")},t.klik=async function(a){n.go("dash.datapendaftaranform",{id:a.id,status:"update"})},t.act_remove=async function(r){try{if((await d.swal({title:"Confirm",text:"Yakin akan menghapus "+r.nama+" ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus"})).value){var s=angular.copy(r);await o({method:"POST",url:a.baseApi()+"hapus_datapendaftaran",data:{id_pendaftaran:s.id}});var l=t.datas_pendaftaran.indexOf(r);t.datas_pendaftaran.splice(l,1),e.loading=!1,d.success("Success hapus"),t.$apply()}}catch(a){401===a.status&&"error"===a.data.status?(e.loading=!1,n.go("login")):(e.loading=!1,d.alert("Error verifikasi data..."),t.$apply())}},t.act_search=async function(){if(""===t.search)s=1,l();else{e.loading=!0;try{const r=await o({method:"GET",url:a.baseApi()+"search_datapendaftaran?q="+t.search});t.datas_pendaftaran=r.data,e.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(e.loading=!1,n.go("login")):(e.loading=!1,d.alert("Error load data..."),t.$apply())}}},t.refresh=function(){s=1,t.search="",t.data={},l()},l()}]);
angular.module("datapendaftaranform.ctrl",[]).controller("datapendaftaranformCtrl",["config","$scope","$state","$base64","$http","$rootScope","swangular",function(a,t,n,o,e,l,r){t.url_pas_foto=a.baseImage()+"upload/",t.data={},t.btn_save_text="update"===n.params.status?"Update":"Save",t.startViewTanggalLahir=moment().subtract(17,"year").format("DD/MM/YYYY"),t.foto_source="",t.file_foto={},t.tanggal_lahir,t.browse_foto=function(a){if(a[0].size<55e4){var n=new FileReader;n.onload=function(a){t.foto_source=a.target.result,t.$apply()},n.readAsDataURL(a[0])}else r.alert("Resolusi terlalu besar")},t.change_jenjang=function(a){},t.change_pindahan_kelas=function(a){},t.submit=async function(){l.loading=!0;try{t.data.pindahan_kelas=""===t.data.pindahan_kelas?"non":t.data.pindahan_kelas;var o=moment(t.tanggal_lahir).format("DD/MM/YYYY");if(t.data.tanggal_lahir=o,""!==t.foto_source){var s=new FormData;s.append("file",t.file_foto),s.append("name",moment().unix().toString()+"_"+t.data.nama.replace(/\s/g,"_"));const n=await e.post(a.baseApi()+"upload_image",s,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}});t.data.pas_foto=n.data.image}null===t.data.no_kartu?t.data.status_kartu_ujian="no":t.data.status_kartu_ujian="yes",await e({method:"POST",url:a.baseApi()+"update_pendaftaran",data:t.data}),r.success("Success Update"),l.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(l.loading=!1,n.go("login")):(l.loading=!1,r.alert("Error load data..."),t.$apply())}},t.toRp=function(a){for(var t=parseInt(a,10).toString().split("").reverse().join(""),n="",o=0;o<t.length;o++)n+=t[o],(o+1)%3==0&&o!==t.length-1&&(n+=".");return n.split("").reverse().join("")},async function(){l.loading=!0;try{const o=await e({method:"GET",url:a.baseApi()+"datapendaftaran_id/"+n.params.id});t.data=o.data,t.data.pindahan_kelas="non"===t.data.pindahan_kelas?"":t.data.pindahan_kelas,t.tanggal_lahir=moment(t.data.tanggal_lahir,"DD/MM/YYYY"),l.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(l.loading=!1,n.go("login")):(l.loading=!1,r.alert("Error load data..."),t.$apply())}}()}]);
angular.module("seleksi.ctrl",[]).controller("seleksiCtrl",["config","$scope","$state","$base64","$http","$rootScope","swangular",function(a,t,s,l,n,e,o){t.datas_seleksi=[];var r=1;async function i(){e.loading=!0;try{const l=await n({method:"GET",url:a.baseApi()+"seleksi/"+r});t.datas_seleksi=l.data,e.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(e.loading=!1,s.go("login")):(e.loading=!1,o.alert("Error load data..."),t.$apply())}}t.url_pas_foto=a.baseImage()+"upload/",t.search="",t.data={},t.toRp=function(a){for(var t=parseInt(a,10).toString().split("").reverse().join(""),s="",l=0;l<t.length;l++)s+=t[l],(l+1)%3==0&&l!==t.length-1&&(s+=".");return s.split("").reverse().join("")},t.load_more=async function(){e.loading=!0;try{r+=1;const i=await n({method:"GET",url:a.baseApi()+"seleksi/"+r});for(var l=0;l<i.data.length;l++)t.datas_seleksi.push(i.data[l]);e.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(e.loading=!1,s.go("login")):(e.loading=!1,o.alert("Error load data..."),t.$apply())}},t.klik=function(a){t.data=angular.copy(a),$("#modal_seleksi").appendTo("body").modal("show")},t.act_luluskan=async function(l){try{if((await o.swal({title:"Confirm",text:"Yakin ingin meluluskan "+l.nama+" ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, luluskan"})).value){var r=angular.copy(l);await n({method:"POST",url:a.baseApi()+"luluskan_seleksi",data:{no_kartu:r.no_kartu,id_pendaftaran:r.id}});var i=t.datas_seleksi.indexOf(l);t.datas_seleksi[i].keterangan="LULUS",e.loading=!1,o.success("Success meluluskan"),t.$apply()}}catch(a){401===a.status&&"error"===a.data.status?(e.loading=!1,s.go("login")):(e.loading=!1,o.alert("Error lulus data..."),t.$apply())}},t.act_cancel=async function(l){

try{if((await o.swal({title:"Confirm",text:"Yakin ingin batal kelulusan  "+l.nama+" ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, batalkan"})).value){var r=angular.copy(l);await n({method:"POST",url:a.baseApi()+"batalkan_seleksi",data:{id_pendaftaran:r.id}});var i=t.datas_seleksi.indexOf(l);t.datas_seleksi[i].keterangan="BELUM",e.loading=!1,o.success("Success membatalkan"),t.$apply()}}catch(a){401===a.status&&"error"===a.data.status?(e.loading=!1,s.go("login")):(e.loading=!1,o.alert("Error batalkan data..."),t.$apply())}},t.act_search=async function(){if(""===t.search)r=1,i();else{e.loading=!0;try{const l=await n({method:"GET",url:a.baseApi()+"search_seleksi?q="+t.search});t.datas_seleksi=l.data,e.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(e.loading=!1,s.go("login")):(e.loading=!1,o.alert("Error load data..."),t.$apply())}}},t.refresh=function(){r=1,t.search="",t.data={},i()},i()}]);
angular.module("session.ctrl",[]).controller("sessionCtrl",["config","$scope","$rootScope","$state","$base64","$http","swangular","$anchorScroll",function(s,a,i,n,t,l,d,o){a.show_form=!1,a.datas_session=[],a.btn_save_text="Save",a.search="",a.session={};var r=1;async function e(){i.loading=!0;try{const t=await l({method:"GET",url:s.baseApi()+"session/"+r});a.datas_session=t.data,i.loading=!1,a.$apply()}catch(s){401===s.status&&"error"===s.data.status?(i.loading=!1,n.go("login")):(i.loading=!1,d.alert("Error load data..."),a.$apply())}}a.add=function(){a.show_form?a.show_form=!1:(a.btn_save_text="Save",a.session={},a.show_form=!0)},a.load_more=async function(){i.loading=!0;try{r+=1;const o=await l({method:"GET",url:s.baseApi()+"session/"+r});for(var t=0;t<o.data.length;t++)a.datas_session.push(o.data[t]);i.loading=!1,a.$apply()}catch(s){401===s.status&&"error"===s.data.status?(i.loading=!1,n.go("login")):(i.loading=!1,d.alert("Error load data..."),a.$apply())}},a.act_search=async function(){i.loading=!0;try{r=1;var t="";t=""===a.search?s.baseApi()+"session/"+r:s.baseApi()+"search_session?q="+a.search;const o=await l({method:"GET",url:t});a.datas_session=o.data,i.loading=!1,a.$apply()}catch(s){401===s.status&&"error"===s.data.status?(i.loading=!1,n.go("login")):(i.loading=!1,d.alert("Error load data..."),a.$apply())}},a.save_or_update=async function(){i.loading=!0;try{if("Save"===a.btn_save_text)if("success"===(await l({method:"POST",url:s.baseApi()+"save_session",data:a.session})).data.status){r=1;const n=await l({method:"GET",url:s.baseApi()+"session/"+r});a.datas_session=n.data,i.loading=!1,d.success("Success save session"),a.session={},a.search="",a.$apply()}else i.loading=!1,d.alert("Error, Nama session sudah ada."),a.$apply();else if("success"===(await l({method:"POST",url:s.baseApi()+"update_session",data:a.session})).data.status){r=1;const n=await l({method:"GET",url:s.baseApi()+"session/"+r});a.datas_session=n.data,i.loading=!1,a.search="",d.success("Success update session"),a.$apply()}else i.loading=!1,d.alert("Error, Nama session sudah ada."),a.$apply()}catch(s){401===s.status&&"error"===s.data.status?(i.loading=!1,n.go("login")):(i.loading=!1,d.alert("Error load data, mohon isi dengan lengkapi"),a.$apply())}},a.act_click=function(s){a.session=angular.copy(s),a.btn_save_text="Update",a.show_form=!0,o()},a.refresh=function(){a.show_form=!1,a.datas_session=[],a.btn_save_text="Save",a.session={},a.search="",r=1,e()},a.act_remove=async function(t){if((await d.swal({title:"Confirm",text:"Yakin akan menghapus session ini ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oke, hapus"})).value){a.show_form=!1,i.loading=!0,a.$apply();try{if("success"===(await l({method:"POST",url:s.baseApi()+"delete_session",data:{id_session:t.id_session}})).data.status){r=1;const n=await l({method:"GET",url:s.baseApi()+"session/"+r});a.datas_session=n.data,i.loading=!1,a.search="",d.success("Success delete session"),a.$apply()}else i.loading=!1,d.alert("Error, session sedang digunakan"),a.$apply()}catch(s){401===s.status&&"error"===s.data.status?(i.loading=!1,n.go("login")):(i.loading=!1,d.alert("Error delete data..."),a.$apply())}}},a.act_activate=async function(t){if((await d.swal({title:"Confirm",text:"Yakin ingin mengaktifkan session "+t.session_name+" ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oke, aktifkan"})).value){a.show_form=!1,i.loading=!0,a.$apply();try{if("success"===(await l({method:"POST",url:s.baseApi()+"activate_session",data:{id_session:t.id_session}})).data.status){r=1;const n=await l({method:"GET",url:s.baseApi()+"session/"+r});a.datas_session=n.data,i.loading=!1,a.search="",d.success("Success aktifkan session"),a.$apply()}else i.loading=!1,d.alert("Error, load data"),a.$apply()}catch(s){401===s.status&&"error"===s.data.status?(i.loading=!1,n.go("login")):(i.loading=!1,d.alert("Error delete data..."),a.$apply())}}},e()}]);
angular.module("agenda.ctrl",[]).controller("agendaCtrl",["config","$scope","$rootScope","$state","$base64","$http","swangular","$anchorScroll",function(a,n,t,g,e,o,d,r){async function _(){t.loading=!0;try{const e=await o({method:"GET",url:a.baseApi()+"agenda"});n.datas_agenda=e.data,t.loading=!1,n.$apply()}catch(a){401===a.status&&"error"===a.data.status?(t.loading=!1,g.go("login")):(t.loading=!1,d.alert("Error load data..."),n.$apply())}}n.show_form=!1,n.datas_agenda=[],n.btn_save_text="Save",n.agenda={},n.add=function(){n.show_form?n.show_form=!1:(n.btn_save_text="Save",n.agenda={},n.show_form=!0)},n.tanggal_pendaftaran_format=function(a,n){return moment(a).format("DD MMMM YYYY")+" - "+moment(n).format("DD MMMM YYYY")},n.tanggal_ujian_format=function(a){return moment(a).format("DD MMMM YYYY")},n.save_or_update=async function(){t.loading=!0;try{var e={};e.tanggal_pendaftaran_from=moment(n.agenda.tanggal_pendaftaran_from).format("YYYY-MM-DD"),e.tanggal_pendaftaran_to=moment(n.agenda.tanggal_pendaftaran_to).format("YYYY-MM-DD"),e.tanggal_ujian=moment(n.agenda.tanggal_ujian).format("YYYY-MM-DD"),e.tanggal_pengumuman=moment(n.agenda.tanggal_pengumuman).format("YYYY-MM-DD"),e.tanggal_daftar_ulang_from=moment(n.agenda.tanggal_daftar_ulang_from).format("YYYY-MM-DD"),e.tanggal_daftar_ulang_to=moment(n.agenda.tanggal_daftar_ulang_to).format("YYYY-MM-DD"),e.kuota_pendaftaran=n.agenda.kuota_pendaftaran,e.id_agenda=n.agenda.id_agenda,await o({method:"POST",url:a.baseApi()+"update_agenda",data:e});const r=await o({method:"GET",url:a.baseApi()+"agenda"});n.datas_agenda=r.data,t.loading=!1,d.success("Success update agenda"),n.$apply()}catch(a){401===a.status&&"error"===a.data.status?(t.loading=!1,g.go("login")):(t.loading=!1,d.alert("Error load data agenda"),n.$apply())}},n.tanggal_pendaftaran_from,n.act_click=function(a){var t=angular.copy(a);n.agenda.tanggal_pendaftaran_from=moment(t.tanggal_pendaftaran_from),n.agenda.tanggal_pendaftaran_to=moment(t.tanggal_pendaftaran_to),n.agenda.tanggal_ujian=moment(t.tanggal_ujian),n.agenda.tanggal_pengumuman=moment(t.tanggal_pengumuman),n.agenda.tanggal_daftar_ulang_from=moment(t.tanggal_daftar_ulang_from),n.agenda.tanggal_daftar_ulang_to=moment(t.tanggal_daftar_ulang_to),n.agenda.kuota_pendaftaran=parseInt(t.kuota_pendaftaran),n.agenda.id_agenda=t.id_agenda,n.btn_save_text="Update",n.show_form=!0,r()},n.refresh=function(){n.show_form=!1,n.datas_agenda=[],n.agenda={},_()},_()}]);
angular.module("config.ctrl",[]).controller("configCtrl",["config","$scope","$rootScope","$state","$base64","$http","swangular","$anchorScroll",function(a,o,t,n,r,i,c,e){async function s(){t.loading=!0;try{const r=await i({method:"GET",url:a.baseApi()+"config"});o.datas_config=r.data,t.loading=!1,o.$apply()}catch(a){401===a.status&&"error"===a.data.status?(t.loading=!1,n.go("login")):(t.loading=!1,c.alert("Error load data..."),o.$apply())}}o.show_form=!1,o.datas_config=[],o.btn_save_text="Save",o.config={},o.add=function(){o.show_form?o.show_form=!1:(o.btn_save_text="Save",o.config={},o.show_form=!0)},o.toRp=function(a){for(var o=parseInt(a,10).toString().split("").reverse().join(""),t="",n=0;n<o.length;n++)t+=o[n],(n+1)%3==0&&n!==o.length-1&&(t+=".");return t.split("").reverse().join("")},o.save_or_update=async function(){t.loading=!0;try{await i({method:"POST",url:a.baseApi()+"update_config",data:o.config});const r=await i({method:"GET",url:a.baseApi()+"config"});o.datas_config=r.data,t.loading=!1,c.success("Success update config"),o.$apply()}catch(a){401===a.status&&"error"===a.data.status?(t.loading=!1,n.go("login")):(t.loading=!1,c.alert("Error load data config"),o.$apply())}},o.act_click=function(a){var t=angular.copy(a);o.config=t,o.config.max_bangku=parseInt(t.max_bangku),o.config.biaya_pendaftaran=parseInt(t.biaya_pendaftaran),o.btn_save_text="Update",o.show_form=!0,e()},o.refresh=function(){o.show_form=!1,o.datas_config=[],o.config={},s()},s()}]);
angular.module("hasil.ctrl",[]).controller("hasilCtrl",["config","$scope","$rootScope","$state","$base64","$http","swangular","$anchorScroll",function(a,l,i,e,t,r,s,u){async function _(){i.loading=!0;try{const t=await r({method:"GET",url:a.baseApi()+"hasil"});l.datas_hasil=t.data,i.loading=!1,l.$apply()}catch(a){401===a.status&&"error"===a.data.status?(i.loading=!1,e.go("login")):(i.loading=!1,s.alert("Error load data..."),l.$apply())}}l.show_form=!1,l.datas_hasil=[],l.btn_save_text="Save",l.search="",l.hasil={},l.file_source={},l.add=function(){l.show_form?l.show_form=!1:(l.btn_save_text="Save",l.file_source={},l.hasil={},l.show_form=!0)},l.save_or_update=async function(){i.loading=!0;try{if("Save"===l.btn_save_text){(t=new FormData).append("file",l.file_source),t.append("name",moment().unix().toString()+l.hasil.judul.replace(/\s/g,"_"));const e=await r.post(a.baseApi()+"upload_hasil",t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}});if(l.hasil.url_file=e.data.file,"success"===(await r({method:"POST",url:a.baseApi()+"save_hasil",data:l.hasil})).data.status){const e=await r({method:"GET",url:a.baseApi()+"hasil"});l.datas_hasil=e.data,i.loading=!1,s.success("Success save data"),l.hasil={},l.file_source={},l.$apply()}else i.loading=!1,s.alert("Error save data"),l.$apply()}else{if(l.file_source.size){var t;l.hasil.status_upload="upload",(t=new FormData).append("file",l.file_source),t.append("name",moment().unix().toString()+l.hasil.judul.replace(/\s/g,"_"));const i=await r.post(a.baseApi()+"upload_hasil",t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}});l.hasil.url_file=i.data.file}else l.hasil.url_file="none",l.hasil.status_upload="notupload";if("success"===(await r({method:"POST",url:a.baseApi()+"update_hasil",data:l.hasil})).data.status){const e=await r({method:"GET",url:a.baseApi()+"hasil"});l.datas_hasil=e.data,i.loading=!1,s.success("Success update data"),l.$apply()}else i.loading=!1,s.alert("Error update data"),l.$apply()}}catch(a){401===a.status&&"error"===a.data.status?(i.loading=!1,e.go("login")):(i.loading=!1,s.alert("Error load data, mohon isi dengan lengkapi"),l.$apply())}},l.click=function(a){var i=angular.copy(a);l.hasil=i,l.hasil.url_file_temp=i.url_file,l.btn_save_text="Update",l.file_source={},l.file_source.name=l.hasil.url_file,l.show_form=!0},l.refresh=function(){l.show_form=!1,l.datas_hasil=[],l.btn_save_text="Save",l.hasil={},_()},l.remove=async function(t){if((await s.swal({title:"Confirm",text:"Yakin akan menghapus file ini ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oke, hapus"})).value){l.show_form=!1,i.loading=!0,l.$apply();try{if("success"===(await r({method:"POST",url:a.baseApi()+"delete_hasil",data:{id_file_hasil_seleksi:t.id_file_hasil_seleksi,url_file:t.url_file}})).data.status){const e=await r({method:"GET",url:a.baseApi()+"hasil"});l.datas_hasil=e.data,i.loading=!1,s.success("Success delete data"),l.$apply()}else i.loading=!1,s.alert("Error delete data"),l.$apply()}catch(a){401===a.status&&"error"===a.data.status?(i.loading=!1,e.go("login")):(i.loading=!1,s.alert("Error delete data..."),l.$apply())}}},_()}]);
angular.module("biaya.ctrl",[]).controller("biayaCtrl",["config","$scope","$rootScope","$state","$base64","$http","swangular","$anchorScroll",function(a,t,i,e,s,n,o,r){async function l(){i.loading=!0;try{const s=await n({method:"GET",url:a.baseApi()+"biaya_back"});t.datas_biaya=s.data,i.loading=!1,t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(i.loading=!1,e.go("login")):(i.loading=!1,o.alert("Error load data..."),t.$apply())}}t.show_form=!1,t.datas_biaya=[],t.btn_save_text="Save",t.search="",t.biaya={},t.add=function(){t.show_form?t.show_form=!1:(t.btn_save_text="Save",t.biaya={},t.show_form=!0)},t.save_or_update=async function(){i.loading=!0;try{if("Save"===t.btn_save_text){await n({method:"POST",url:a.baseApi()+"save_biaya_back",data:t.biaya});const e=await n({method:"GET",url:a.baseApi()+"biaya_back"});t.datas_biaya=e.data,o.success("Success save biaya"),t.biaya={},t.search="",i.loading=!1,t.$apply()}else{await n({method:"POST",url:a.baseApi()+"update_biaya_back",data:t.biaya});const e=await n({method:"GET",url:a.baseApi()+"biaya_back"});t.datas_biaya=e.data,i.loading=!1,t.search="",o.success("Success update biaya"),t.$apply()}}catch(a){401===a.status&&"error"===a.data.status?(i.loading=!1,e.go("login")):(i.loading=!1,o.alert("Error load data, mohon isi dengan lengkapi"),t.$apply())}},t.act_click=function(a){t.biaya=angular.copy(a),t.biaya.harga_smp=parseInt(t.biaya.harga_smp),t.biaya.harga_sma=parseInt(t.biaya.harga_sma),t.btn_save_text="Update",t.show_form=!0,r()},t.refresh=function(){t.show_form=!1,t.datas_biaya=[],t.btn_save_text="Save",t.biaya={},t.search="",l()},t.act_remove=async function(s){if((await o.swal({title:"Confirm",text:"Yakin akan menghapus biaya ini ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oke, hapus"})).value){t.show_form=!1,i.loading=!0,t.$apply();try{await n({method:"POST",url:a.baseApi()+"delete_biaya_back",data:{id_session:s.id_session}});const r=await n({method:"GET",url:a.baseApi()+"biaya_back"});t.datas_biaya=r.data,i.loading=!1,t.search="",o.success("Success delete biaya"),t.$apply()}catch(a){401===a.status&&"error"===a.data.status?(i.loading=!1,e.go("login")):(i.loading=!1,o.alert("Error delete data..."),t.$apply())}}},t.toRp=function(a){for(var t=parseInt(a,10).toString().split("").reverse().join(""),i="",e=0;e<t.length;e++)i+=t[e],(e+1)%3==0&&e!==t.length-1&&(i+=".");return i.split("").reverse().join("")},t.getTotal=function(a){for(var i=0,e=0;e<t.datas_biaya.length;e++){var s=t.datas_biaya[e];i+=parseInt(s[a])}return i},l()}]);